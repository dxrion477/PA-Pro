<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>PA OS – Beach Panel</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">

<style>
    :root {
        /* Background + Surfaces */
        --sand-bg: #F7F3EE;          /* soft sand */
        --white-card: #FFFFFF;       /* clean foam white */

        /* Accents */
        --seafoam: #DDEEE8;          /* pale green-blue */
        --coastal-blue: #AFC9D9;     /* muted ocean blue */
        --tide-blue: #7FA8BE;        /* deeper accent for active states */

        /* Text + Lines */
        --driftwood: #B8AFA6;        /* taupe-gray for text */
        --deep-driftwood: #6E665F;   /* darker text for headers */
        --line-soft: #E6E1DB;        /* subtle borders */

        /* Shadows */
        --soft-shadow: rgba(0,0,0,0.05);
        --medium-shadow: rgba(0,0,0,0.08);
    }

    * {
        box-sizing: border-box;
    }

    body {
        font-family: 'Montserrat', sans-serif;
        background: var(--sand-bg);
        color: var(--deep-driftwood);
        margin: 0;
        padding: 30px 20px 40px;
    }

    h1.app-title {
        margin: 0 0 20px 0;
        font-size: 32px;
        font-weight: 900;
        letter-spacing: 0.12em;
        text-transform: uppercase;
        text-align: center;
        color: var(--deep-driftwood);
        font-style: italic;
        opacity: 0.8;
    }

    .tabs {
        display: flex;
        justify-content: center;
        gap: 12px;
        margin-bottom: 25px;
        flex-wrap: wrap;
    }

    .tab {
        padding: 10px 20px;
        border-radius: 50px;
        border: 1px solid var(--seafoam);
        background: var(--white-card);
        color: var(--deep-driftwood);
        font-size: 11px;
        text-transform: uppercase;
        cursor: pointer;
        transition: 0.25s ease;
    }

    .tab.active {
        background: var(--coastal-blue);
        border-color: var(--coastal-blue);
        color: #fff;
        box-shadow: 0 4px 10px var(--medium-shadow);
    }

    .page {
        display: none;
        max-width: 800px;
        margin: 0 auto;
    }

    .page.active {
        display: block;
    }

    .card {
        background: var(--white-card);
        padding: 24px 20px 26px;
        border-radius: 16px;
        box-shadow: 0 10px 30px var(--soft-shadow);
    }

    .section-title {
        font-size: 10px;
        font-weight: 700;
        letter-spacing: .15em;
        margin: 0 0 12px;
        text-transform: uppercase;
        color: var(--deep-driftwood);
    }

    .field-label {
        font-size: 10px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: .12em;
        margin-bottom: 6px;
        color: var(--driftwood);
    }

    input[type="text"] {
        width: 100%;
        padding: 11px 12px;
        border-radius: 10px;
        border: 1px solid var(--line-soft);
        background: #fff;
        font-size: 13px;
        color: var(--deep-driftwood);
        outline: none;
        transition: 0.2s ease;
    }

    input[type="text"]:focus {
        border-color: var(--coastal-blue);
        box-shadow: 0 0 0 2px rgba(175,201,217,0.25);
    }

    button {
        font-family: 'Montserrat', sans-serif;
        font-size: 11px;
        font-weight: 600;
        padding: 11px 18px;
        border-radius: 50px;
        border: none;
        background: var(--tide-blue);
        color: #fff;
        cursor: pointer;
        text-transform: uppercase;
        letter-spacing: .08em;
        transition: 0.25s ease;
    }

    button:hover {
        background: var(--coastal-blue);
    }

    .btn-secondary {
        background: var(--seafoam);
        color: var(--deep-driftwood);
    }

    .btn-secondary:hover {
        background: var(--coastal-blue);
        color: #fff;
    }

    .btn-danger {
        background: #C46A6A;
    }

    .btn-danger:hover {
        background: #B05555;
    }

    .formatter-layout {
        display: grid;
        grid-template-columns: 1.2fr;
        gap: 18px;
    }

    .formatter-actions {
        display: flex;
        gap: 10px;
        margin-top: 10px;
        flex-wrap: wrap;
    }

    .output-box {
        margin-top: 18px;
        padding: 14px 14px;
        border-radius: 10px;
        background: #F0EBE4;
        border: 1px solid var(--line-soft);
        font-size: 14px;
        font-weight: 500;
        min-height: 40px;
        display: none;
        white-space: pre-wrap;
        word-break: break-word;
    }

    .helper-text {
        font-size: 10px;
        color: var(--driftwood);
        margin-top: 6px;
    }

    /* Staples */
    .checklist {
        margin-top: 10px;
    }

    .checklist-item {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 6px 8px;
        border-radius: 8px;
        border: 1px solid transparent;
        font-size: 13px;
    }

    .checklist-item:nth-child(odd) {
        background: #F4EFE8;
    }

    .checklist-item:nth-child(even) {
        background: #FBF8F3;
    }

    .checklist-item input[type="checkbox"] {
        width: 16px;
        height: 16px;
        accent-color: var(--tide-blue);
        cursor: pointer;
    }

    .checklist-section-title {
        margin-top: 16px;
        margin-bottom: 6px;
        font-size: 10px;
        font-weight: 700;
        letter-spacing: .15em;
        text-transform: uppercase;
        color: var(--driftwood);
    }

    /* Modal */
    .modal-backdrop {
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.35);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 100;
    }

    .modal {
        background: var(--white-card);
        padding: 22px 20px 18px;
        border-radius: 16px;
        max-width: 360px;
        width: 90%;
        box-shadow: 0 10px 30px var(--medium-shadow);
    }

    .modal-title {
        font-weight: 600;
        font-size: 16px;
        margin-bottom: 8px;
        color: var(--deep-driftwood);
    }

    .modal-body {
        font-size: 13px;
        margin-bottom: 18px;
        line-height: 1.5;
        color: var(--deep-driftwood);
    }

    .modal-actions {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
    }

    .modal-btn {
        flex: 1;
        padding: 9px 10px;
        border-radius: 999px;
        border: none;
        font-size: 11px;
        font-weight: 600;
        cursor: pointer;
        text-transform: uppercase;
        letter-spacing: .08em;
    }

    .modal-primary {
        background: var(--tide-blue);
        color: #fff;
    }

    .modal-secondary {
        background: var(--seafoam);
        color: var(--deep-driftwood);
    }

    @media (max-width: 600px) {
        body {
            padding: 20px 14px 30px;
        }
        .card {
            padding: 20px 16px 22px;
        }
    }
</style>
</head>
<body>

<h1 class="app-title">PA Pro</h1>

<div class="tabs">
    <div class="tab active" onclick="switchTab('formatter')">Formatter</div>
    <div class="tab" onclick="switchTab('staples')">Daily Staples</div>
</div>

<!-- FORMATTER TAB -->
<div id="formatter" class="page active">
    <div class="card">
        <div class="section-title">Scheduling Formatter</div>

        <input id="inputLine" type="text">

        </div>

        <div class="formatter-actions">
            <button onclick="formatLine()">Format</button>
        </div>

        <div id="output" class="output-box"></div>
    </div>
</div>

<!-- DAILY STAPLES TAB -->
<div id="staples" class="page">
    <div class="card">
        <div class="section-title">Daily Staples Checklist</div>
        <div id="checklist"></div>

        <div style="margin-top:16px; display:flex; gap:10px; flex-wrap:wrap;">
            <button class="btn-secondary" onclick="resetChecklist()">Reset Checklist</button>
        </div>
    </div>
</div>

<!-- VENDOR MODAL -->
<div id="vendorModal" class="modal-backdrop">
    <div class="modal">
        <div class="modal-title">Vendor Detected</div>
        <div class="modal-body">
            This looks like a vendor or service provider.  
            Open Community Dwelling to log them and update the gate list.
        </div>
        <div class="modal-actions">
            <button class="modal-btn modal-secondary" onclick="closeVendorModal()">Dismiss</button>
            <button class="modal-btn modal-primary" onclick="openCommunityDwelling()">Open Community Dwelling</button>
        </div>
    </div>
</div>

<script>
/* TAB SWITCHING */
function switchTab(tab) {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));

    document.querySelector(`.tab[onclick="switchTab('${tab}')"]`).classList.add('active');
    document.getElementById(tab).classList.add('active');
}

/* UTILITIES */
function titleCase(str) {
    return str.replace(/\w\S*/g, txt =>
        txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase()
    );
}

function extractTime(text) {
    const timeRegex = /(\d{1,2}[:.]?\d{0,2}\s?(am|pm))/i;
    const match = text.match(timeRegex);
    if (!match) return { cleaned: text, time: null };

    let raw = match[0].toLowerCase().replace(/\s+/g, "");
    let cleaned = text.replace(match[0], "").replace(/apt/gi, "").trim();

    let hours = "";
    let minutes = "";
    let period = raw.includes("pm") ? "PM" : "AM";

    raw = raw.replace("am", "").replace("pm", "");

    if (raw.includes(":")) {
        [hours, minutes] = raw.split(":");
    } else if (raw.length <= 2) {
        hours = raw;
        minutes = "00";
    } else {
        hours = raw.slice(0, raw.length - 2);
        minutes = raw.slice(-2);
    }

    if (minutes === "") minutes = "00";

    return {
        cleaned: cleaned.trim(),
        time: `${parseInt(hours)}:${minutes}${period}`
    };
}

/* FORMATTER LOGIC */
function formatLine() {
let input = document.getElementById("inputLine").value.trim();

// Normalize spacing around the dash so "nt - follow up" works
input = input.replace(/\s*-\s*/, "-");

let dashIndex = input.indexOf("-");
    if (dashIndex === -1) return;

    // WHO can be multi-word, anything before the first dash
    let whoRaw = input.slice(0, dashIndex);
    let whatRaw = input.slice(dashIndex + 1);

    let who = whoRaw.trim().toLowerCase();
    let what = whatRaw.trim().toLowerCase();

    let { cleaned, time } = extractTime(what);
    let whatFinal = titleCase(cleaned);

    // DR. fix
    whatFinal = whatFinal.replace(/dr\.\s*([A-Za-z]+)/gi, (match, name) => {
        let fixedName = name.charAt(0).toUpperCase() + name.slice(1).toLowerCase();
        return `Dr. ${fixedName}`;
    });

    let output = "";

    if (["nt", "nancy", "n"].includes(who)) {
        output = `NT – ${whatFinal}`;
        if (time) output += ` (${time} Appointment)`;
    }
    else if (["coco"].includes(who)) {
        output = `Coco – ${whatFinal}`;
        if (time) output += ` (${time} Appointment)`;
    }
    else if (["rt", "ralph"].includes(who)) {
        output = `RT – ${whatFinal}`;
    }
    else {
        let whoFinal = titleCase(who);
        output = `${whoFinal} – ${whatFinal}`;
    }

    const outEl = document.getElementById("output");
    outEl.innerText = output;
    outEl.style.display = "block";

    // Auto-copy to clipboard
    if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(output).catch(() => {});
    }

    // Vendor detection: anything not Nancy / Coco / Ralph
    if (!["nt", "nancy", "n", "coco", "rt", "ralph"].includes(who)) {
        openVendorModal();
    }
}

/* VENDOR MODAL */
function openVendorModal() {
    document.getElementById("vendorModal").style.display = "flex";
}

function closeVendorModal() {
    document.getElementById("vendorModal").style.display = "none";
}

function openCommunityDwelling() {
    window.location.href = "https://community.dwellinglive.com/";
}

/* DAILY STAPLES CHECKLIST */
const staples = [
    // Cleaning & Laundry
    "Bounty Paper Towels",
    "Charmin Ultra Soft",
    "Glad Trash Bags",
    "Recycle Bags",
    "Dawn Dish Soap",
    "Hand Soap",
    "Cascade Platinum Plus Pods",
    "Tide Free & Gentle Pods",
    "Bounce Free & Gentle Dryer Pods",

    // Refrigerated Essentials
    "Lactaid Whole Milk",
    "Lactaid 2% Milk",

    // Coco Essentials
    "FreshPet Chicken & Garden Vegetables",
    "Dog Waste Bags",

    // Drinks & Beverages
    "Pure Leaf Unsweetened Black Tea",
    "Fiji",
    "Deer Park",

    // Coffee
    "Decaf Light Roast Coffee",
    "Light Roast Coffee",
    "Dark Roast Coffee"
];

function loadChecklist() {
    const container = document.getElementById("checklist");
    container.innerHTML = "";

    let currentSection = "";

    const sections = {
        "Cleaning & Laundry": 0,
        "Refrigerated Essentials": 9,
        "Coco Essentials": 11,
        "Drinks & Beverages": 13,
        "Coffee": 16
    };

    const sectionOrder = [
        "Cleaning & Laundry",
        "Refrigerated Essentials",
        "Coco Essentials",
        "Drinks & Beverages",
        "Coffee"
    ];

    sectionOrder.forEach((sectionName, idx) => {
        const startIndex = sections[sectionName];
        const endIndex = sectionOrder[idx + 1]
            ? sections[sectionOrder[idx + 1]]
            : staples.length;

        const titleEl = document.createElement("div");
        titleEl.className = "checklist-section-title";
        titleEl.textContent = sectionName;
        container.appendChild(titleEl);

        for (let i = startIndex; i < endIndex; i++) {
            const item = staples[i];
            const checked = localStorage.getItem("staple_" + i) === "true";

            const row = document.createElement("div");
            row.className = "checklist-item";

            const cb = document.createElement("input");
            cb.type = "checkbox";
            cb.id = "item_" + i;
            cb.checked = checked;
            cb.onclick = () => saveCheck(i);

            const label = document.createElement("label");
            label.setAttribute("for", "item_" + i);
            label.textContent = item;

            row.appendChild(cb);
            row.appendChild(label);
            container.appendChild(row);
        }
    });
}

function saveCheck(index) {
    const isChecked = document.getElementById("item_" + index).checked;
    localStorage.setItem("staple_" + index, isChecked);
}

function resetChecklist() {
    staples.forEach((_, index) => {
        localStorage.removeItem("staple_" + index);
    });
    loadChecklist();
}

loadChecklist();
</script>

</body>
</html>